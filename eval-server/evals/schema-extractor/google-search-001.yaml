# Google Search results extraction test
id: "google-search-001"
name: "Extract Google Search Results"
description: "Extract search results from Google search page"
enabled: true

target:
  url: "https://www.google.com/search?q=chrome+devtools+tutorial"
  wait_for: "networkidle"
  wait_timeout: 5000

tool: "extract_schema_data"
timeout: 45000

input:
  schema:
    type: "object"
    properties:
      query:
        type: "string"
      searchResults:
        type: "array"
        items:
          type: "object"
          properties:
            title:
              type: "string"
            url:
              type: "string"
              format: "url"
            snippet:
              type: "string"
            domain:
              type: "string"
          required:
            - "title"
            - "url"
            - "snippet"
      featuredSnippet:
        type: "object"
        properties:
          content:
            type: "string"
          source:
            type: "string"
          url:
            type: "string"
            format: "url"
      relatedSearches:
        type: "array"
        items:
          type: "string"
    required:
      - "searchResults"
  instruction: "Extract the top 10 search results with titles, URLs, and snippets. Also extract featured snippet if present and related searches"
  reasoning: "Testing extraction from Google search results page with various result types"

validation:
  type: "llm_judge"
  llm_judge:
    model: "gpt-4.1-mini"
    temperature: 0.3
    criteria:
      - "Search results are relevant to the query"
      - "Each result has a valid title, URL, and snippet"
      - "URLs are properly resolved and not node IDs"
      - "Related searches are extracted if present"
      - "Featured snippet is captured when available"

metadata:
  tags: ["search", "google", "serp", "dynamic"]
  priority: "high"
  timeout: 45000
  retries: 2
  flaky: true
  owner: "devtools-team"